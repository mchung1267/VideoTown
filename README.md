# VideoTown - Readme

# 프로젝트 소개

VideoTown 은 Spring Boot를 사용하여 유명 동영상 스트리밍 플랫폼 YouTube를 참고하여 만든 동영상 재생 플랫폼을 위한 정산 시스템 입니다.

# 개발 기간

1. 11. 15 ~ 2024. 11. 12. (4주) + 지속

# 개발 환경

- Java 21
- Spring Boot 3.3.4
- MySQL 9.0.1

# 주요 기능

### 회원 가입 및 로그인, 로그아웃 기능

### 동영상 관련 기능

- 동영상 추가
    - 제목, 길이, 게시자 정보 저장
    - 동영상 길이에 따라 자동으로 광고 추가 (5분이상 10분미만 영상에 15초 광고 추가, 10분 이상 영상에 광고 2개 추가)
- 동영상 시청
    - 영상 시청 시 조회수 집계 기능
    - 광고 시청 시 광고를 시청한 것으로 처리 및 광고 시청 기록에 집계

### 정산 관련 기능

- 스케쥴러를 통해 광고 시청 및 동영상 시청 정보를 각 유저별로 정리
    - 매일 스케쥴러를 통해 동영상 및 광고 시청 정보를 정리하여 수익금 정산 데이터베이스에 기록
    - 각 데이터를 요약하여 일일 총 수익금 기록으로도 (별도의 테이블에) 저장
- 정산 데이터 조회 기능
    - 1일, 1주, 1개월 단위를 선택하여 수익금 정산기록 조회 가능
    - 각 정산 리포트에는 각 컨텐츠별 수익금 정보 역시 함께 포함

# MSA

모노리딕 방식의 서비스 구현의 경우, **서비스 중 하나의 서비스에 문제가 발생할 경우 전체 기능이 마비**될 수 있으며, 프로젝트의 **규모가 클 경우 컴파일 등에도 시간이 더 오래 소요**되어, 오류 발생 시 근원을 찾는 과정이나 픽스 과정이 더 복잡해졌습니다. 따라서 이 프로젝트는 여러 개의 마이크로서비스 단위로 서비스를 분리하여, 오류 발생 시 원인 추적 및 해결을 더 쉽게 만들었습니다.

## 아키텍처
![아키텍처 구상도](https://github.com/user-attachments/assets/448af44a-14d8-4166-abd2-4d1449a7377d)

## 서비스 구조

- Eureka Server
    - Eureka Server을 통해 MSA의 기초를 구현하였습니다.
- Cloud Gateway
    - 게이트웨이에 Spring Security 필터 등을 적용하여, 로그인하지 않을 경우 각 서비스로의 접근을 차단 하였습니다.
- PayoutService
    - 정산 데이터와 관련된 서비스를 따로 분리하였습니다.
- VideoService
    - 동영상 업로드, 시청 등 기본적인 동영상 및 광고 관련 CRUD에 관한 기능을 수행합니다
- AuthService
    - 회원 가입, 로그인, 로그아웃 및 JWT토큰 발행을 담당하는 서비스입니다.
 
# 프로젝트에서 제일 고민하였던 점

동영상 플랫폼은 세계적으로 유튜브가 독보적인 지위를 차지하고 있지만, 상당히 많은 수의 동영상 재생 플랫폼이 존재하고, 이 중에서는 온라인 강의를 위한 플랫폼 등 정산이 필요하지 않은 경우도 있지만, 대부분의 User-Generated콘텐츠를 취급하는 동영상 재생 플랫폼은 기본적으로 정산 시스템이 들어갈 필요가 있습니다. 
